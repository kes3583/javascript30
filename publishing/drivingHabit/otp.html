<!doctype html>
<html>
  <head>
      <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
  
      <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi">
  
      <meta name="apple-mobile-web-app-title" content="index" />
      <meta name="apple-mobile-web-app-capable" content="yes">

      <link rel="shortcut icon" href="/favicon.ico">
      <link rel="apple-touch-icon-precomposed" sizes="114×114" href="/share/favicon.png">
      <title>운전습관</title>
      <meta property="og:title" content="운전습관">
      <meta property="og:type" content="website">
      <meta property="og:image" content="">
      <meta property="og:site_name" content="운전습관">
      <meta property="fb:app_id" content="">
      <meta property="og:url" content="">
      <meta property="og:description" content="운전습관">

      <link rel="stylesheet" type="text/css" href="/publishing/drivingHabit/css/otp.css">
  </head>
  <body >
    <header class="underLine">
      <a href="javascript:;" class="backBtn"></a>
      <a href="javascript:;" class="txt">일회용 인증번호(OTP)</a>
    </header>
    <section class="wrap">
      <section class="otp">
        <strong class="bold">035 </strong><strong class="bold">684</strong><a href="javascript:;" class="refresh"></a>
        <div class="remainTime">인증번호 유효시간 <span>60</span> 초</div>
        <div class="gage"><div class="gageAnimate"></div></div>
      </section>
    </section>
  </body>
  <script src="/publishing/drivingHabit/js/plugins/jquery-1.11.1.min.js"></script>
  <script>
    $(function(){
      countDown();

      $(".refresh").click(function(){
        countDown();
      })
    });

    function countDown(){
      setOtp();
      $(".otp").removeClass("under10")
      $(".otp .remainTime span").text("60");
      $(".otp .gage .gageAnimate").stop().css("width", "100%").animate({
        width:0
      }, {
        duration: 90000,
        progress: function(promise, progress, remainingMs) {
          $(".remainTime span").text(Math.floor(remainingMs/1000))
            if(remainingMs < 11000){
              $(".otp").addClass("under10")
            }
          },
          complete: function(){
            $(".refresh").click();
          },
          easing:"linear"
      })
    }

    function setOtp(){
      var otp1 = validationNum(Math.floor(Math.random() * 999));
      var otp2 = validationNum(Math.floor(Math.random() * 999));
      $(".otp strong").eq(0).text(otp1 + " ").next().text(otp2)
    }

    function validationNum(num){
      if(num < 10){
        return "00" + num;
      }else if(num < 100){
        return "0" + num;
      }else{
        return num;
      }
    }
  </script>
</html>